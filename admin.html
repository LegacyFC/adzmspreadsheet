<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Admin - Ajouter Article</title>
<style>
body { background:#0b1d3a; color:white; font-family:Arial; padding:20px; }
input, button { width:100%; padding:10px; margin:8px 0; }
button { background:#1e90ff; color:white; border:none; font-weight:bold; }
</style>
</head>
<body>

<h2>Admin – Ajouter un article</h2>

<input id="pass" type="password" placeholder="Mot de passe">
<button onclick="login()">Entrer</button>

<div id="admin" style="display:none;">
  <input id="name" placeholder="Nom de l'article">
  <input id="price" placeholder="Prix">
  <input id="image" placeholder="Lien image">
  <input id="link" placeholder="Lien Hipobuy">
  <button onclick="addArticle()">Ajouter</button>
  <p style="font-size:12px;">Après chaque ajout, télécharge le fichier et remplace l'ancien articles.json sur GitHub.</p>
</div>

<script>
const PASSWORD = "2580"; // change à ton goût

function login() {
  if(document.getElementById("pass").value === PASSWORD) {
    document.getElementById("admin").style.display = "block";
  } else {
    alert("Mot de passe incorrect");
  }
}

function addArticle() {
  let name = document.getElementById("name").value;
  let price = document.getElementById("price").value;
  let image = document.getElementById("image").value;
  let link = document.getElementById("link").value;

  fetch("articles.json")
    .then(res => res.json())
    .then(data => {
      data.push({name, price, image, link});
      
      const blob = new Blob([JSON.stringify(data, null, 2)], {type:"application/json"});
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "articles.json";
      a.click();

      alert("JSON généré ! Remplace l'ancien articles.json sur GitHub.");
      
      // réinitialiser les champs
      document.getElementById("name").value="";
      document.getElementById("price").value="";
      document.getElementById("image").value="";
      document.getElementById("link").value="";
    });
}
</script>

</body>
</html>

